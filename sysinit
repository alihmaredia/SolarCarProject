#!/bin/bash
#
#    Script to initialize the Raspberry Pis used in the UTSVT Solar Vehicle Data Acquistion and Display System.
#    USAGE: TBD
#
## VARIABLES ##
CURDIR="$PWD"  
CDPATH=:$HOME/SolarCarProject		# Directory to git repository
DISPLAY="Display"			# Name of display side directory (in git repo)
DAQ="Acquisition"			# Name of pit side directory (in git repo)

## DISPLAY FUNCTION ##
display() {
	echo "Running Pit RPI scripts . . ."
	cd "$DISPLAY"
	chmod +x ./display.sh		
	./display.sh			# Run display side main script
	#echo "$PWD"
	cd "$CURDIR"
}

## IN-CAR FUNCTION ##
incar() {
	echo "Running Car RPI scripts . . ."
	# James wants upgrade/update here.
	# TODO: Actually test this after open house.
	cd "$DAQ"
	chmod +x ./can.sh
	./can.sh
	#echo "$PWD"
	cd "$CURDIR"
}

## VALIDATE ARGUMENTS ##
if [ $# -ne 1 ]; then
	echo "Usage: $0 {pit|car}" >&2
	exit 1
fi

## HANDLE ARGUMENTS ##
case "$1" in
	# Run display scripts
	pit)
		display
		exit 0
		;;
	# Run in-car scripts
	car)
		incar
		exit 0
		;;
	# Show usage
	*)
		echo "Usage: $0 {pit|car}" >&2
		exit 1	
	;;
esac

## END ##
